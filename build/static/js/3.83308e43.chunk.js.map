{"version":3,"sources":["components/UI/Input/Input.js","components/UI/Input/Input.module.scss","containers/Checkout/ContactData/ContactData.module.scss","components/Order/CheckoutSummary/CheckoutSummary.module.scss","containers/Checkout/ContactData/ContactData.js","components/Order/CheckoutSummary/CheckoutSummary.js","containers/Checkout/Checkout.js"],"names":["Input","props","inputElement","inputClasses","classes","InputElement","invalid","push","Invalid","includes","pop","elementType","elementConfig","value","className","join","onChange","changed","options","map","option","displayName","module","exports","connect","state","ingr","burgerBuilder","ingredients","price","loading","order","confirmed","orderConfirmed","token","auth","userId","dispatch","onOrderBurger","orderData","actions","withErrorHandler","React","useState","orderForm","name","type","placeholder","validation","required","valid","touched","phone","isTel","email","isMail","street","house","deliveryMethod","formIsValid","useForm","setForm","formElements","key","id","config","form","styles","ContactData","onSubmit","event","preventDefault","formData","inputIdx","el","idx","updatedOrderForm","updatedFormElement","target","rules","isValid","trim","test","checkValidity","changeFormValueHandler","Button","btnType","disabled","Spinner","orderRedirect","to","axios","CheckoutSummary","Burger","clicked","checkoutCanceled","checkoutContinued","Checkout","checkoutCanceledHandler","history","goBack","checkoutContinuedHandler","replace","summary","this","path","match","component","Component"],"mappings":"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","file":"static/js/3.83308e43.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nimport classes from \"./Input.module.scss\";\r\n\r\nconst Input = (props) => {\r\n  let inputElement = null;\r\n  let inputClasses = [classes.InputElement];\r\n  if (props.invalid) {inputClasses.push(classes.Invalid)} else if (inputClasses.includes(classes.Invalid) ) {\r\n    inputClasses.pop(classes.Invalid) \r\n  };\r\n  switch (props.elementType) {\r\n    case \"input\":\r\n      inputElement = (\r\n        <input\r\n          {...props.elementConfig}\r\n          value={props.value}\r\n          className={inputClasses.join(\" \")}\r\n          onChange={props.changed}\r\n        />\r\n      );\r\n      break;\r\n    case \"text-area\":\r\n      inputElement = (\r\n        <textarea\r\n          {...props.elementConfig}\r\n          value={props.value}\r\n          className={inputClasses.join(\" \")}\r\n          onChange={props.changed}\r\n        />\r\n      );\r\n      break;\r\n    case \"select\":\r\n      inputElement = (\r\n        <select\r\n          value={props.value}\r\n          className={inputClasses.join(\" \")}\r\n          onChange={props.changed}\r\n        >\r\n          {props.elementConfig.options.map((option) => (\r\n            <option key={option.value} value={option.value}>\r\n              {option.displayName}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      );\r\n      break;\r\n    default:\r\n      inputElement = (\r\n        <input\r\n          {...props.elementConfig}\r\n          value={props.value}\r\n          className={inputClasses.join(\" \")}\r\n          onChange={props.changed}\r\n        />\r\n      );\r\n  }\r\n  return <>{ inputElement }</>;\r\n};\r\n\r\nexport default Input;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"InputElement\":\"Input_InputElement__1srPc\",\"Invalid\":\"Input_Invalid__N4bnu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ContactData\":\"ContactData_ContactData__1nPzo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CheckoutSummary\":\"CheckoutSummary_CheckoutSummary__9Rkiw\"};","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport styles from \"./ContactData.module.scss\";\r\nimport { Button } from \"../../../components/UI/Button/Button\";\r\nimport axios from \"../../../axios-orders\";\r\nimport Spinner from \"../../../components/UI/Spinner/Spinner\";\r\nimport Input from \"../../../components/UI/Input/Input\";\r\nimport * as actions from \"../../../store/actions/order\";\r\nimport withErrorHandler from \"../../../hoc/withErrorHandler/withErrorHandler\";\r\n\r\nconst ContactData = (props) => {\r\n const [useForm, setForm] = React.useState({\r\n    orderForm: {\r\n      name: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"text\",\r\n          placeholder: \"Your Name\",\r\n        },\r\n        value: \"\",\r\n        validation: { required: true },\r\n        valid: false,\r\n        touched: false,\r\n      },\r\n      phone: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"tel\",\r\n          placeholder: \"Your Phone Number\",\r\n        },\r\n        value: \"\",\r\n        validation: { required: true, isTel: true },\r\n        valid: false,\r\n        touched: false,\r\n      },\r\n      email: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"email\",\r\n          placeholder: \"Your E-mail\",\r\n        },\r\n        value: \"\",\r\n        validation: { required: true, isMail: true },\r\n        valid: false,\r\n        touched: false,\r\n      },\r\n      street: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"text\",\r\n          placeholder: \"Your Street\",\r\n        },\r\n        value: \"\",\r\n        validation: { required: true },\r\n        valid: false,\r\n        touched: false,\r\n      },\r\n      house: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"text\",\r\n          placeholder: \"Your House\",\r\n        },\r\n        value: \"\",\r\n        validation: { required: true },\r\n        valid: false,\r\n        touched: false,\r\n      },\r\n      deliveryMethod: {\r\n        elementType: \"select\",\r\n        elementConfig: {\r\n          options: [\r\n            { value: \"fastest\", displayName: \"Fastest\" },\r\n            { value: \"cheapest\", displayName: \"Cheapest\" },\r\n          ],\r\n        },\r\n        value: \"fastest\",\r\n        valid: true,\r\n        validation: {},\r\n      },\r\n    },\r\n    formIsValid: false,\r\n  });\r\n\r\n  const checkValidity = (value, rules) => {\r\n    let isValid = true;\r\n    if (rules.required) {\r\n      isValid = value.trim() !== \"\" && isValid;\r\n    }\r\n    if (rules.isMail) {\r\n      const pattern = /^[\\w]{1}[\\w-.]*@[\\w-]+\\.[a-z]{2,4}$/i;\r\n      isValid = pattern.test(value) && isValid;\r\n    }\r\n    if (rules.isTel) {\r\n      const pattern = /^[\\d+][\\d()-]{7,19}\\d$/;\r\n      isValid = pattern.test(value) && isValid;\r\n    }\r\n    return isValid;\r\n  };\r\n\r\n  const changeFormValueHandler = (event, idx) => {\r\n    const updatedOrderForm = { ...useForm.orderForm };\r\n    const updatedFormElement = { ...updatedOrderForm[idx] };\r\n    updatedFormElement.value = event.target.value;\r\n    updatedFormElement.touched = true;\r\n    updatedFormElement.valid = checkValidity(\r\n      updatedFormElement.value,\r\n      updatedFormElement.validation\r\n    );\r\n    updatedOrderForm[idx] = updatedFormElement;\r\n\r\n    let formIsValid = true;\r\n\r\n    for (let inputIdx in updatedOrderForm) {\r\n      formIsValid = updatedOrderForm[inputIdx].valid && formIsValid;\r\n    }\r\n\r\n    setForm({ orderForm: updatedOrderForm, formIsValid: formIsValid });\r\n  };\r\n\r\n  const orderHandler = (event) => {\r\n    event.preventDefault();\r\n\r\n    const formData = {};\r\n    for (let inputIdx in useForm.orderForm) {\r\n      formData[inputIdx] = useForm.orderForm[inputIdx].value;\r\n    }\r\n    const order = {\r\n      ingredients: props.ingr,\r\n      price: props.price,\r\n      orderData: formData,\r\n      userId: props.userId,\r\n    };\r\n\r\n    props.onOrderBurger(order, props.token);\r\n  };\r\n\r\n  const formElements = [];\r\n  for (let key in useForm.orderForm) {\r\n    formElements.push({\r\n      id: key,\r\n      config: useForm.orderForm[key],\r\n    });\r\n  }\r\n  let form = (\r\n    <form className={styles.ContactData} onSubmit={orderHandler}>\r\n      <h4>Enter your contact data, please.</h4>\r\n      {formElements.map((el) => (\r\n        <Input\r\n          key={el.id}\r\n          elementConfig={el.config.elementConfig}\r\n          elementType={el.config.elementType}\r\n          value={el.config.value}\r\n          changed={(event) => changeFormValueHandler(event, el.id)}\r\n          invalid={\r\n            el.config.validation && !el.config.valid && el.config.touched\r\n          }\r\n        />\r\n      ))}\r\n      <Button btnType=\"Success\" disabled={!useForm.formIsValid}>\r\n        CONFIRM\r\n      </Button>\r\n    </form>\r\n  );\r\n\r\n  if (props.loading) {\r\n    form = <Spinner />;\r\n  }\r\n  const orderRedirect = props.confirmed ? <Redirect to=\"/\" /> : null;\r\n\r\n  return (\r\n    <>\r\n      {orderRedirect}\r\n      {form}\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    ingr: state.burgerBuilder.ingredients,\r\n    price: state.burgerBuilder.price,\r\n    loading: state.order.loading,\r\n    confirmed: state.order.orderConfirmed,\r\n    token: state.auth.token,\r\n    userId: state.auth.userId,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onOrderBurger: (orderData, token) =>\r\n      dispatch(actions.burgerOrder(orderData, token)),\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withErrorHandler(ContactData, axios));\r\n","import React from \"react\";\r\n\r\nimport { Burger } from \"../../Burger/Burger\";\r\nimport { Button } from \"../../UI/Button/Button\";\r\nimport styles from \"./CheckoutSummary.module.scss\";\r\n\r\nconst CheckoutSummary = (props) => {\r\n  return (\r\n    <div className={styles.CheckoutSummary}>\r\n      <h1>We hope it tastes perfect!</h1>\r\n      <Burger ingredients={props.ingredients} />\r\n      <Button btnType=\"Danger\" clicked={props.checkoutCanceled}>\r\n        Cancel\r\n      </Button>\r\n      <Button btnType=\"Success\" clicked={props.checkoutContinued}>\r\n        Continue\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckoutSummary;\r\n","import React, { Component } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport ContactData from \"./ContactData/ContactData\";\r\nimport CheckoutSummary from \"../../components/Order/CheckoutSummary/CheckoutSummary\";\r\n\r\nclass Checkout extends Component {\r\n \r\n  checkoutCanceledHandler = () => {\r\n    this.props.history.goBack();\r\n  };\r\n  checkoutContinuedHandler = () => {\r\n    this.props.history.replace(\"/checkout/contact-data\");\r\n  };\r\n\r\n  render() {\r\n    let summary = <Redirect to=\"/\" />;\r\n    if (this.props.ingr) {\r\n      const orderRedirect = this.props.confirmed ? <Redirect to=\"/\" /> : null;\r\n      summary = (\r\n        <>\r\n          {orderRedirect}\r\n          <CheckoutSummary\r\n            ingredients={this.props.ingr}\r\n            checkoutContinued={this.checkoutContinuedHandler}\r\n            checkoutCanceled={this.checkoutCanceledHandler}\r\n          />\r\n          <Route\r\n            path={this.props.match.path + \"/contact-data\"}\r\n            component={ContactData}\r\n          />\r\n        </>\r\n      );\r\n    }\r\n    return summary;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    ingr: state.burgerBuilder.ingredients,\r\n    confirmed: state.order.orderConfirmed,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Checkout);\r\n"],"sourceRoot":""}