{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\projects\\\\BurgerBuilder\\\\BurgerBuilder\\\\src\\\\containers\\\\BurgerBuilder\\\\BurgerBuilder.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Aux } from \"../../hoc/Auxiliary/Auxiliary\";\nimport { Burger } from \"../../components/Burger/Burger\";\nimport { BuildControls } from \"../../components/Burger/BuildControls/BuildControls\";\nimport Modal from \"../../components/UI/Modal/Modal\";\nimport { BurgerSummary } from \"../../components/Burger/BurgerSummary/BurgerSummary\";\nimport axios from \"../../axios-orders\";\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\nimport withErrorHandler from \"../../hoc/withErrorHandler/withErrorHandler\";\nimport * as actions from \"../../store/actions/burgerBuilder\";\nimport * as orderActions from \"../../store/actions/order\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass BurgerBuilder extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      purchasing: false // loading: false,\n      // error: false,\n\n    };\n\n    this.updatePurchasable = ingredients => {\n      let sum = Object.keys(ingredients).map(ingr => ingredients[ingr]).reduce((sum, el) => {\n        return sum + el;\n      }, 0);\n      return sum > 0;\n    };\n\n    this.purchaseHandler = () => {\n      this.props.isAuthanticated ? this.setState({\n        purchasing: true\n      }) : this.props.history.push(\"/auth\");\n      console.log(this.state.purchasing);\n    };\n\n    this.purchaseContinueHandler = () => {\n      this.props.history.push(\"/checkout\");\n      this.props.onOrderInit(); // alert(\"You continue!\");\n      // const queryParams = [];\n      // for (let i in this.props.ingr) {\n      //   queryParams.push(\n      //     encodeURIComponent(i) + \"=\" + encodeURIComponent(this.props.ingr[i])\n      //   );\n      // }\n      // queryParams.push(\"price=\" + this.props.price);\n      // const queryString = queryParams.join(\"&\");\n      // this.props.history.push({\n      //   pathname: \"/checkout\",\n      //   search: \"?\" + queryString,\n      // });\n    };\n\n    this.purchaseCloseHandler = () => {\n      this.setState({\n        purchasing: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    console.log(this.props);\n    this.props.onInitIngredients(); //   axios\n    //     .get(\n    //       \"https://burger-builder-b8bbf-default-rtdb.firebaseio.com/ingredients.json\"\n    //     )\n    //     .then((response) => {\n    //       this.setState({ ingredients: response.data });\n    //     })\n    //     .catch(( ) => this.setState({ error: true }));\n  }\n\n  render() {\n    const disabledInfo = { ...this.props.ingr\n    };\n\n    for (let ingr in disabledInfo) {\n      disabledInfo[ingr] = disabledInfo[ingr] <= 0;\n    }\n\n    let orderModal = null;\n    let burger = this.props.error ? /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"black\",\n        margin: \"200px 0 0 50px\"\n      },\n      children: \"ingredients can't be loaded\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this);\n\n    if (this.props.ingr) {\n      burger = /*#__PURE__*/_jsxDEV(Aux, {\n        children: [/*#__PURE__*/_jsxDEV(Burger, {\n          ingredients: this.props.ingr\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BuildControls, {\n          ingredientsAdd: this.props.onIngredientsAdded,\n          ingredientsRemove: this.props.onIngredientsRemoved,\n          disabled: disabledInfo,\n          purchasable: this.updatePurchasable(this.props.ingr),\n          price: this.props.price,\n          ordered: this.purchaseHandler,\n          isAuthanticated: this.props.isAuthanticated\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this);\n      orderModal = /*#__PURE__*/_jsxDEV(BurgerSummary, {\n        ingredients: this.props.ingr,\n        continuePurchasing: this.purchaseContinueHandler,\n        CancelPurchasing: this.purchaseCloseHandler,\n        price: this.props.price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this);\n    } // if (this.state.loading) {\n    //   orderModal = <Spinner />;\n    // }\n\n\n    return /*#__PURE__*/_jsxDEV(Aux, {\n      children: [/*#__PURE__*/_jsxDEV(Modal, {\n        show: this.state.purchasing,\n        close: this.purchaseCloseHandler,\n        children: orderModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), burger]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    ingr: state.burgerBuilder.ingredients,\n    price: state.burgerBuilder.price,\n    error: state.burgerBuilder.error,\n    isAuthanticated: state.auth.token !== null\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onIngredientsAdded: ingName => dispatch(actions.addIngredient(ingName)),\n    onIngredientsRemoved: ingName => dispatch(actions.removeIngredient(ingName)),\n    onInitIngredients: () => dispatch(actions.initIngredients()),\n    onOrderInit: () => dispatch(orderActions.burgerOrderInit())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler(BurgerBuilder, axios));","map":{"version":3,"sources":["C:/Users/User/projects/BurgerBuilder/BurgerBuilder/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","Component","connect","Aux","Burger","BuildControls","Modal","BurgerSummary","axios","Spinner","withErrorHandler","actions","orderActions","BurgerBuilder","state","purchasing","updatePurchasable","ingredients","sum","Object","keys","map","ingr","reduce","el","purchaseHandler","props","isAuthanticated","setState","history","push","console","log","purchaseContinueHandler","onOrderInit","purchaseCloseHandler","componentDidMount","onInitIngredients","render","disabledInfo","orderModal","burger","error","color","margin","onIngredientsAdded","onIngredientsRemoved","price","mapStateToProps","burgerBuilder","auth","token","mapDispatchToProps","dispatch","ingName","addIngredient","removeIngredient","initIngredients","burgerOrderInit"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Aux } from \"../../hoc/Auxiliary/Auxiliary\";\r\nimport { Burger } from \"../../components/Burger/Burger\";\r\nimport { BuildControls } from \"../../components/Burger/BuildControls/BuildControls\";\r\nimport Modal from \"../../components/UI/Modal/Modal\";\r\nimport { BurgerSummary } from \"../../components/Burger/BurgerSummary/BurgerSummary\";\r\nimport axios from \"../../axios-orders\";\r\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\r\nimport withErrorHandler from \"../../hoc/withErrorHandler/withErrorHandler\";\r\nimport * as actions from \"../../store/actions/burgerBuilder\";\r\nimport * as orderActions from \"../../store/actions/order\";\r\n\r\nclass BurgerBuilder extends Component {\r\n  // constructor(props) {\r\n  //   super(props);\r\n  //   this.state = {\r\n\r\n  //   }\r\n  // }\r\n\r\n  state = {\r\n    purchasing: false,\r\n    // loading: false,\r\n    // error: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    console.log(this.props);\r\n    this.props.onInitIngredients();\r\n    //   axios\r\n    //     .get(\r\n    //       \"https://burger-builder-b8bbf-default-rtdb.firebaseio.com/ingredients.json\"\r\n    //     )\r\n    //     .then((response) => {\r\n    //       this.setState({ ingredients: response.data });\r\n    //     })\r\n    //     .catch(( ) => this.setState({ error: true }));\r\n  }\r\n\r\n  updatePurchasable = (ingredients) => {\r\n    let sum = Object.keys(ingredients)\r\n      .map((ingr) => ingredients[ingr])\r\n      .reduce((sum, el) => {\r\n        return sum + el;\r\n      }, 0);\r\n    return sum > 0;\r\n  };\r\n\r\n  // ingredientsAddHandler = (type) => {\r\n  //   let newCount = this.props.ingr[type] + 1;\r\n  //   const updateIngredients = {\r\n  //     ...this.props.ingr,\r\n  //   };\r\n  //   updateIngredients[type] = newCount;\r\n  //   let newPrice = this.props.price + INGREDIENTS_PRICE[type];\r\n  //   this.setState({ ingredients: updateIngredients, price: newPrice });\r\n  //   this.updatePurchasable(updateIngredients);\r\n  // };\r\n\r\n  // ingredientsRemoveHandler = (type) => {\r\n  //   let newCount = this.props.ingr[type] - 1;\r\n  //   if (newCount < 0) return;\r\n  //   const updateIngredients = {\r\n  //     ...this.props.ingr,\r\n  //   };\r\n  //   updateIngredients[type] = newCount;\r\n  //   let newPrice = this.props.price - INGREDIENTS_PRICE[type];\r\n  //   this.setState({ ingredients: updateIngredients, price: newPrice });\r\n  //   this.updatePurchasable(updateIngredients);\r\n  // };\r\n\r\n  purchaseHandler = () => {\r\n    this.props.isAuthanticated\r\n      ? this.setState({ purchasing: true })\r\n      : this.props.history.push(\"/auth\");\r\n    console.log(this.state.purchasing);\r\n  };\r\n\r\n  purchaseContinueHandler = () => {\r\n    this.props.history.push(\"/checkout\");\r\n    this.props.onOrderInit();\r\n    // alert(\"You continue!\");\r\n    // const queryParams = [];\r\n    // for (let i in this.props.ingr) {\r\n    //   queryParams.push(\r\n    //     encodeURIComponent(i) + \"=\" + encodeURIComponent(this.props.ingr[i])\r\n    //   );\r\n    // }\r\n    // queryParams.push(\"price=\" + this.props.price);\r\n    // const queryString = queryParams.join(\"&\");\r\n    // this.props.history.push({\r\n    //   pathname: \"/checkout\",\r\n    //   search: \"?\" + queryString,\r\n    // });\r\n  };\r\n\r\n  purchaseCloseHandler = () => {\r\n    this.setState({ purchasing: false });\r\n  };\r\n\r\n  render() {\r\n    const disabledInfo = {\r\n      ...this.props.ingr,\r\n    };\r\n\r\n    for (let ingr in disabledInfo) {\r\n      disabledInfo[ingr] = disabledInfo[ingr] <= 0;\r\n    }\r\n    let orderModal = null;\r\n\r\n    let burger = this.props.error ? (\r\n      <p style={{ color: \"black\", margin: \"200px 0 0 50px\" }}>\r\n        ingredients can't be loaded\r\n      </p>\r\n    ) : (\r\n      <Spinner />\r\n    );\r\n    if (this.props.ingr) {\r\n      burger = (\r\n        <Aux>\r\n          <Burger ingredients={this.props.ingr} />\r\n          <BuildControls\r\n            ingredientsAdd={this.props.onIngredientsAdded}\r\n            ingredientsRemove={this.props.onIngredientsRemoved}\r\n            disabled={disabledInfo}\r\n            purchasable={this.updatePurchasable(this.props.ingr)}\r\n            price={this.props.price}\r\n            ordered={this.purchaseHandler}\r\n            isAuthanticated={this.props.isAuthanticated}\r\n          />\r\n        </Aux>\r\n      );\r\n      orderModal = (\r\n        <BurgerSummary\r\n          ingredients={this.props.ingr}\r\n          continuePurchasing={this.purchaseContinueHandler}\r\n          CancelPurchasing={this.purchaseCloseHandler}\r\n          price={this.props.price}\r\n        />\r\n      );\r\n    }\r\n\r\n    // if (this.state.loading) {\r\n    //   orderModal = <Spinner />;\r\n    // }\r\n\r\n    return (\r\n      <Aux>\r\n        <Modal show={this.state.purchasing} close={this.purchaseCloseHandler}>\r\n          {orderModal}\r\n        </Modal>\r\n        {burger}\r\n      </Aux>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    ingr: state.burgerBuilder.ingredients,\r\n    price: state.burgerBuilder.price,\r\n    error: state.burgerBuilder.error,\r\n    isAuthanticated: state.auth.token !== null,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onIngredientsAdded: (ingName) => dispatch(actions.addIngredient(ingName)),\r\n    onIngredientsRemoved: (ingName) =>\r\n      dispatch(actions.removeIngredient(ingName)),\r\n    onInitIngredients: () => dispatch(actions.initIngredients()),\r\n    onOrderInit: () => dispatch(orderActions.burgerOrderInit()),\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withErrorHandler(BurgerBuilder, axios));\r\n"]},"metadata":{},"sourceType":"module"}