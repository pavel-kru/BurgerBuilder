{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\projects\\\\BurgerBuilder\\\\BurgerBuilder\\\\src\\\\containers\\\\Checkout\\\\ContactData\\\\ContactData.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\nimport styles from \"./ContactData.module.scss\";\nimport { Button } from \"../../../components/UI/Button/Button\";\nimport axios from \"../../../axios-orders\";\nimport Spinner from \"../../../components/UI/Spinner/Spinner\";\nimport Input from \"../../../components/UI/Input/Input\";\nimport * as actions from \"../../../store/actions/order\";\nimport withErrorHandler from \"../../../hoc/withErrorHandler/withErrorHandler\";\nimport { updateState, checkValidity } from \"../../../shared/utility\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass ContactData extends Component {\n  constructor(props) {\n    s;\n  }\n\n  changeFormValueHandler(event, idx) {\n    const updatedFormElement = updateState(this.state.orderForm[idx], {\n      value: event.target.value,\n      touched: true,\n      valid: checkValidity(event.target.value, this.state.orderForm[idx].validation)\n    });\n    const updatedOrderForm = updateState(this.state.orderForm, {\n      [idx]: updatedFormElement\n    });\n    let formIsValid = true;\n\n    for (let inputIdx in updatedOrderForm) {\n      formIsValid = updatedOrderForm[inputIdx].valid && formIsValid;\n    }\n\n    this.setState({\n      orderForm: updatedOrderForm,\n      formIsValid: formIsValid\n    });\n  }\n\n  render() {\n    const formElements = [];\n\n    for (let key in this.state.orderForm) {\n      formElements.push({\n        id: key,\n        config: this.state.orderForm[key]\n      });\n    }\n\n    let form = /*#__PURE__*/_jsxDEV(\"form\", {\n      className: styles.ContactData,\n      onSubmit: this.orderHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Enter your contact data, please.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), formElements.map(el => /*#__PURE__*/_jsxDEV(Input, {\n        elementConfig: el.config.elementConfig,\n        elementType: el.config.elementType,\n        value: el.config.value,\n        changed: event => this.changeFormValueHandler(event, el.id),\n        invalid: el.config.validation && !el.config.valid && el.config.touched\n      }, el.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(Button, {\n        btnType: \"Success\",\n        disabled: !this.state.formIsValid // clicked={this.props.onOrderConfirm}\n        ,\n        children: \"CONFIRM\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this);\n\n    if (this.props.loading) {\n      form = /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 14\n      }, this);\n    }\n\n    const orderRedirect = this.props.confirmed ? /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 50\n    }, this) : null;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [orderRedirect, form]\n    }, void 0, true);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    ingr: state.burgerBuilder.ingredients,\n    price: state.burgerBuilder.price,\n    loading: state.order.loading,\n    confirmed: state.order.orderConfirmed,\n    token: state.auth.token,\n    userId: state.auth.userId\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onOrderBurger: (orderData, token) => dispatch(actions.burgerOrder(orderData, token))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler(ContactData, axios));","map":{"version":3,"sources":["C:/Users/User/projects/BurgerBuilder/BurgerBuilder/src/containers/Checkout/ContactData/ContactData.js"],"names":["React","Component","connect","Redirect","styles","Button","axios","Spinner","Input","actions","withErrorHandler","updateState","checkValidity","ContactData","constructor","props","s","changeFormValueHandler","event","idx","updatedFormElement","state","orderForm","value","target","touched","valid","validation","updatedOrderForm","formIsValid","inputIdx","setState","render","formElements","key","push","id","config","form","orderHandler","map","el","elementConfig","elementType","loading","orderRedirect","confirmed","mapStateToProps","ingr","burgerBuilder","ingredients","price","order","orderConfirmed","token","auth","userId","mapDispatchToProps","dispatch","onOrderBurger","orderData","burgerOrder"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport styles from \"./ContactData.module.scss\";\r\nimport { Button } from \"../../../components/UI/Button/Button\";\r\nimport axios from \"../../../axios-orders\";\r\nimport Spinner from \"../../../components/UI/Spinner/Spinner\";\r\nimport Input from \"../../../components/UI/Input/Input\";\r\nimport * as actions from \"../../../store/actions/order\";\r\nimport withErrorHandler from \"../../../hoc/withErrorHandler/withErrorHandler\";\r\nimport { updateState, checkValidity } from \"../../../shared/utility\";\r\n\r\nclass ContactData extends Component {\r\n  constructor(props) {\r\n    s\r\n  }\r\n  state = {\r\n    orderForm: {\r\n      name: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"text\",\r\n          placeholder: \"Your Name\",\r\n        },\r\n        value: \"\",\r\n        validation: { required: true },\r\n        valid: false,\r\n        touched: false,\r\n      },\r\n      phone: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"tel\",\r\n          placeholder: \"Your Phone Number\",\r\n        },\r\n        value: \"\",\r\n        validation: { required: true, isTel: true },\r\n        valid: false,\r\n        touched: false,\r\n      },\r\n      email: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"email\",\r\n          placeholder: \"Your E-mail\",\r\n        },\r\n        value: \"\",\r\n        validation: { required: true, isMail: true },\r\n        valid: false,\r\n        touched: false,\r\n      },\r\n      street: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"text\",\r\n          placeholder: \"Your Street\",\r\n        },\r\n        value: \"\",\r\n        validation: { required: true },\r\n        valid: false,\r\n        touched: false,\r\n      },\r\n      house: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"text\",\r\n          placeholder: \"Your House\",\r\n        },\r\n        value: \"\",\r\n        validation: { required: true },\r\n        valid: false,\r\n        touched: false,\r\n      },\r\n      deliveryMethod: {\r\n        elementType: \"select\",\r\n        elementConfig: {\r\n          options: [\r\n            { value: \"fastest\", displayName: \"Fastest\" },\r\n            { value: \"cheapest\", displayName: \"Cheapest\" },\r\n          ],\r\n        },\r\n        value: \"fastest\",\r\n        valid: true,\r\n        validation: {},\r\n      },\r\n    },\r\n    formIsValid: false,\r\n  };\r\n\r\n  changeFormValueHandler(event, idx) {\r\n    const updatedFormElement = updateState(this.state.orderForm[idx], {\r\n      value: event.target.value,\r\n      touched: true,\r\n      valid: checkValidity(\r\n        event.target.value,\r\n        this.state.orderForm[idx].validation\r\n      ),\r\n    });\r\n    const updatedOrderForm = updateState(this.state.orderForm, {\r\n      [idx]: updatedFormElement,\r\n    });\r\n    let formIsValid = true;\r\n\r\n    for (let inputIdx in updatedOrderForm) {\r\n      formIsValid = updatedOrderForm[inputIdx].valid && formIsValid;\r\n    }\r\n\r\n    this.setState({ orderForm: updatedOrderForm, formIsValid: formIsValid });\r\n  }\r\n\r\n  orderHandler = (event) => {\r\n    event.preventDefault();\r\n\r\n    const formData = {};\r\n    for (let inputIdx in this.state.orderForm) {\r\n      formData[inputIdx] = this.state.orderForm[inputIdx].value;\r\n    }\r\n    const order = {\r\n      ingredients: this.props.ingr,\r\n      price: this.props.price,\r\n      orderData: formData,\r\n      userId: this.props.userId,\r\n    };\r\n\r\n    this.props.onOrderBurger(order, this.props.token);\r\n  };\r\n\r\n  render() {\r\n    const formElements = [];\r\n    for (let key in this.state.orderForm) {\r\n      formElements.push({\r\n        id: key,\r\n        config: this.state.orderForm[key],\r\n      });\r\n    }\r\n    let form = (\r\n      <form className={styles.ContactData} onSubmit={this.orderHandler}>\r\n        <h4>Enter your contact data, please.</h4>\r\n        {formElements.map((el) => (\r\n          <Input\r\n            key={el.id}\r\n            elementConfig={el.config.elementConfig}\r\n            elementType={el.config.elementType}\r\n            value={el.config.value}\r\n            changed={(event) => this.changeFormValueHandler(event, el.id)}\r\n            invalid={\r\n              el.config.validation && !el.config.valid && el.config.touched\r\n            }\r\n          />\r\n        ))}\r\n        <Button\r\n          btnType=\"Success\"\r\n          disabled={!this.state.formIsValid}\r\n          // clicked={this.props.onOrderConfirm}\r\n        >\r\n          CONFIRM\r\n        </Button>\r\n      </form>\r\n    );\r\n\r\n    if (this.props.loading) {\r\n      form = <Spinner />;\r\n    }\r\n    const orderRedirect = this.props.confirmed ? <Redirect to=\"/\" /> : null;\r\n\r\n    return (\r\n      <>\r\n        {orderRedirect}\r\n        {form}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    ingr: state.burgerBuilder.ingredients,\r\n    price: state.burgerBuilder.price,\r\n    loading: state.order.loading,\r\n    confirmed: state.order.orderConfirmed,\r\n    token: state.auth.token,\r\n    userId: state.auth.userId,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onOrderBurger: (orderData, token) =>\r\n      dispatch(actions.burgerOrder(orderData, token)),\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withErrorHandler(ContactData, axios));\r\n"]},"metadata":{},"sourceType":"module"}