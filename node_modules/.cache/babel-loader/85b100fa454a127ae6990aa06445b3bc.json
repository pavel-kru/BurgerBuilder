{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\projects\\\\BurgerBuilder\\\\BurgerBuilder\\\\src\\\\containers\\\\BurgerBuilder\\\\BurgerBuilder.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Aux } from \"../../hoc/Auxiliary/Auxiliary\";\nimport { Burger } from \"../../components/Burger/Burger\";\nimport { BuildControls } from \"../../components/Burger/BuildControls/BuildControls\";\nimport Modal from \"../../components/UI/Modal/Modal\";\nimport { BurgerSummary } from \"../../components/Burger/BurgerSummary/BurgerSummary\";\nimport axios from \"../../axios-orders\";\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\nimport withErrorHandler from \"../../hoc/withErrorHandler/withErrorHandler\";\nimport * as actions from \"../../store/actions/burgerBuilder\";\nimport * as orderActions from \"../../store/actions/order\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass BurgerBuilder extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updatePurchasable = ingredients => {\n      let sum = Object.keys(ingredients).map(ingr => ingredients[ingr]).reduce((sum, el) => {\n        return sum + el;\n      }, 0);\n      return sum > 0;\n    };\n\n    this.purchaseHandler = () => {\n      this.props.isAuthanticated ? this.setState({\n        purchasing: true\n      }) : this.props.history.push(\"/auth\");\n    };\n\n    this.purchaseContinueHandler = () => {\n      this.props.history.push(\"/checkout\");\n      this.props.onOrderInit();\n    };\n\n    this.purchaseCloseHandler = () => {\n      this.setState({\n        purchasing: false\n      });\n    };\n\n    this.state = {\n      purchasing: false\n    };\n  }\n\n  componentDidMount() {\n    this.props.onInitIngredients();\n  }\n\n  render() {\n    const disabledInfo = { ...this.props.ingr\n    };\n\n    for (let ingr in disabledInfo) {\n      disabledInfo[ingr] = disabledInfo[ingr] <= 0;\n    }\n\n    let orderModal = null;\n    let burger = this.props.error ? /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"black\",\n        margin: \"200px 0 0 50px\"\n      },\n      children: \"ingredients can't be loaded\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this);\n\n    if (this.props.ingr) {\n      burger = /*#__PURE__*/_jsxDEV(Aux, {\n        children: [/*#__PURE__*/_jsxDEV(Burger, {\n          ingredients: this.props.ingr\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BuildControls, {\n          ingredientsAdd: this.props.onIngredientsAdded,\n          ingredientsRemove: this.props.onIngredientsRemoved,\n          disabled: disabledInfo,\n          purchasable: this.updatePurchasable(this.props.ingr),\n          price: this.props.price,\n          ordered: this.purchaseHandler,\n          isAuthanticated: this.props.isAuthanticated\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this);\n      orderModal = /*#__PURE__*/_jsxDEV(BurgerSummary, {\n        ingredients: this.props.ingr,\n        continuePurchasing: this.purchaseContinueHandler,\n        CancelPurchasing: this.purchaseCloseHandler,\n        price: this.props.price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this);\n    } // if (this.state.loading) {\n    //   orderModal = <Spinner />;\n    // }\n\n\n    return /*#__PURE__*/_jsxDEV(Aux, {\n      children: [/*#__PURE__*/_jsxDEV(Modal, {\n        show: this.state.purchasing,\n        close: this.purchaseCloseHandler,\n        children: orderModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), burger]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    ingr: state.burgerBuilder.ingredients,\n    price: state.burgerBuilder.price,\n    error: state.burgerBuilder.error,\n    isAuthanticated: state.auth.token !== null\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onIngredientsAdded: ingName => dispatch(actions.addIngredient(ingName)),\n    onIngredientsRemoved: ingName => dispatch(actions.removeIngredient(ingName)),\n    onInitIngredients: () => dispatch(actions.initIngredients()),\n    onOrderInit: () => dispatch(orderActions.burgerOrderInit())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler(BurgerBuilder, axios));","map":{"version":3,"sources":["C:/Users/User/projects/BurgerBuilder/BurgerBuilder/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","Component","connect","Aux","Burger","BuildControls","Modal","BurgerSummary","axios","Spinner","withErrorHandler","actions","orderActions","BurgerBuilder","constructor","props","updatePurchasable","ingredients","sum","Object","keys","map","ingr","reduce","el","purchaseHandler","isAuthanticated","setState","purchasing","history","push","purchaseContinueHandler","onOrderInit","purchaseCloseHandler","state","componentDidMount","onInitIngredients","render","disabledInfo","orderModal","burger","error","color","margin","onIngredientsAdded","onIngredientsRemoved","price","mapStateToProps","burgerBuilder","auth","token","mapDispatchToProps","dispatch","ingName","addIngredient","removeIngredient","initIngredients","burgerOrderInit"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Aux } from \"../../hoc/Auxiliary/Auxiliary\";\r\nimport { Burger } from \"../../components/Burger/Burger\";\r\nimport { BuildControls } from \"../../components/Burger/BuildControls/BuildControls\";\r\nimport Modal from \"../../components/UI/Modal/Modal\";\r\nimport { BurgerSummary } from \"../../components/Burger/BurgerSummary/BurgerSummary\";\r\nimport axios from \"../../axios-orders\";\r\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\r\nimport withErrorHandler from \"../../hoc/withErrorHandler/withErrorHandler\";\r\nimport * as actions from \"../../store/actions/burgerBuilder\";\r\nimport * as orderActions from \"../../store/actions/order\";\r\n\r\nclass BurgerBuilder extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      purchasing: false,\r\n    }\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    \r\n    this.props.onInitIngredients();\r\n      }\r\n\r\n  updatePurchasable = (ingredients) => {\r\n    let sum = Object.keys(ingredients)\r\n      .map((ingr) => ingredients[ingr])\r\n      .reduce((sum, el) => {\r\n        return sum + el;\r\n      }, 0);\r\n    return sum > 0;\r\n  };\r\n\r\n  \r\n  purchaseHandler = () => {\r\n    this.props.isAuthanticated\r\n      ? this.setState({ purchasing: true })\r\n      : this.props.history.push(\"/auth\");\r\n    };\r\n\r\n  purchaseContinueHandler = () => {\r\n    this.props.history.push(\"/checkout\");\r\n    this.props.onOrderInit();\r\n      };\r\n\r\n  purchaseCloseHandler = () => {\r\n    this.setState({ purchasing: false });\r\n  };\r\n\r\n  render() {\r\n    const disabledInfo = {\r\n      ...this.props.ingr,\r\n    };\r\n\r\n    for (let ingr in disabledInfo) {\r\n      disabledInfo[ingr] = disabledInfo[ingr] <= 0;\r\n    }\r\n    let orderModal = null;\r\n\r\n    let burger = this.props.error ? (\r\n      <p style={{ color: \"black\", margin: \"200px 0 0 50px\" }}>\r\n        ingredients can't be loaded\r\n      </p>\r\n    ) : (\r\n      <Spinner />\r\n    );\r\n    if (this.props.ingr) {\r\n      burger = (\r\n        <Aux>\r\n          <Burger ingredients={this.props.ingr} />\r\n          <BuildControls\r\n            ingredientsAdd={this.props.onIngredientsAdded}\r\n            ingredientsRemove={this.props.onIngredientsRemoved}\r\n            disabled={disabledInfo}\r\n            purchasable={this.updatePurchasable(this.props.ingr)}\r\n            price={this.props.price}\r\n            ordered={this.purchaseHandler}\r\n            isAuthanticated={this.props.isAuthanticated}\r\n          />\r\n        </Aux>\r\n      );\r\n      orderModal = (\r\n        <BurgerSummary\r\n          ingredients={this.props.ingr}\r\n          continuePurchasing={this.purchaseContinueHandler}\r\n          CancelPurchasing={this.purchaseCloseHandler}\r\n          price={this.props.price}\r\n        />\r\n      );\r\n    }\r\n\r\n    // if (this.state.loading) {\r\n    //   orderModal = <Spinner />;\r\n    // }\r\n\r\n    return (\r\n      <Aux>\r\n        <Modal show={this.state.purchasing} close={this.purchaseCloseHandler}>\r\n          {orderModal}\r\n        </Modal>\r\n        {burger}\r\n      </Aux>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    ingr: state.burgerBuilder.ingredients,\r\n    price: state.burgerBuilder.price,\r\n    error: state.burgerBuilder.error,\r\n    isAuthanticated: state.auth.token !== null,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onIngredientsAdded: (ingName) => dispatch(actions.addIngredient(ingName)),\r\n    onIngredientsRemoved: (ingName) =>\r\n      dispatch(actions.removeIngredient(ingName)),\r\n    onInitIngredients: () => dispatch(actions.initIngredients()),\r\n    onOrderInit: () => dispatch(orderActions.burgerOrderInit()),\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withErrorHandler(BurgerBuilder, axios));\r\n"]},"metadata":{},"sourceType":"module"}